

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aspire.utils package &mdash; ASPIRE 0.5.28 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="aspire.utils.numeric package" href="aspire.utils.numeric.html" />
    <link rel="prev" title="aspire.source package" href="aspire.source.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> ASPIRE
          

          
          </a>

          
            
            
              <div class="version">
                0.5.28
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Modules</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="aspire.html">aspire package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="aspire.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="aspire.apple.html">aspire.apple package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.aspire.html">aspire.aspire package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.basis.html">aspire.basis package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.class2d.html">aspire.class2d package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.class3d.html">aspire.class3d package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.commands.html">aspire.commands package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.data.html">aspire.data package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.denoising.html">aspire.denoising package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.estimation.html">aspire.estimation package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.image.html">aspire.image package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.io.html">aspire.io package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.nfft.html">aspire.nfft package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.orientation.html">aspire.orientation package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.picker.html">aspire.picker package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.reconstruct.html">aspire.reconstruct package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.source.html">aspire.source package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">aspire.utils package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.volume.html">aspire.volume package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="aspire.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="aspire.html#module-aspire.exceptions">aspire.exceptions module</a></li>
<li class="toctree-l3"><a class="reference internal" href="aspire.html#module-aspire.version">aspire.version module</a></li>
<li class="toctree-l3"><a class="reference internal" href="aspire.html#module-aspire">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ASPIRE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">Modules</a> &raquo;</li>
        
          <li><a href="aspire.html">aspire package</a> &raquo;</li>
        
      <li>aspire.utils package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/aspire.utils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="aspire-utils-package">
<h1>aspire.utils package<a class="headerlink" href="#aspire-utils-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="aspire.utils.numeric.html">aspire.utils.numeric package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="aspire.utils.numeric.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="aspire.utils.numeric.html#aspire-utils-numeric-cupy-module">aspire.utils.numeric.cupy module</a></li>
<li class="toctree-l2"><a class="reference internal" href="aspire.utils.numeric.html#module-aspire.utils.numeric.numpy">aspire.utils.numeric.numpy module</a></li>
<li class="toctree-l2"><a class="reference internal" href="aspire.utils.numeric.html#module-aspire.utils.numeric">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-aspire.utils.blk_diag_func">
<span id="aspire-utils-blk-diag-func-module"></span><h2>aspire.utils.blk_diag_func module<a class="headerlink" href="#module-aspire.utils.blk_diag_func" title="Permalink to this headline">¶</a></h2>
<p>Define operation functions of block diagonal matrix needed by Cov2D analysis.</p>
<dl class="py function">
<dt id="aspire.utils.blk_diag_func.blk_diag_add">
<code class="sig-prename descclassname">aspire.utils.blk_diag_func.</code><code class="sig-name descname">blk_diag_add</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blk_diag_a</span></em>, <em class="sig-param"><span class="n">blk_diag_b</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.blk_diag_func.blk_diag_add" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the element addition of block diagonal matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>blk_diag_a</strong> – The block diagonal A matrix</p></li>
<li><p><strong>blk_diag_b</strong> – The block diagonal B matrix</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A block diagonal matrix with elements equal to corresponding
sums from A and B elements.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.blk_diag_func.blk_diag_apply">
<code class="sig-prename descclassname">aspire.utils.blk_diag_func.</code><code class="sig-name descname">blk_diag_apply</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blk_diag</span></em>, <em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.blk_diag_func.blk_diag_apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the apply option of a block diagonal matrix with a matrix of coefficient vectors</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>blk_diag</strong> – The block diagonal matrix</p></li>
<li><p><strong>x</strong> – The coefficient matrix with each column is a coefficient vector</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A matrix with new coefficient vectors</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.blk_diag_func.blk_diag_compatible">
<code class="sig-prename descclassname">aspire.utils.blk_diag_func.</code><code class="sig-name descname">blk_diag_compatible</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blk_diag_a</span></em>, <em class="sig-param"><span class="n">blk_diag_b</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.blk_diag_func.blk_diag_compatible" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether two block diagonal matrices are compatible or not</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>blk_diag_a</strong> – The block diagonal A matrix</p></li>
<li><p><strong>blk_diag_b</strong> – The block diagonal B matrix</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>True</cite> value if all of shapes in two list representations of
block diagonal matrices are the same, otherwise return <cite>False</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.blk_diag_func.blk_diag_eye">
<code class="sig-prename descclassname">aspire.utils.blk_diag_func.</code><code class="sig-name descname">blk_diag_eye</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blk_partition</span></em>, <em class="sig-param"><span class="n">dtype</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.blk_diag_func.blk_diag_eye" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a block diagonal eye matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>blk_partition</strong> – The matrix block partition of <cite>blk_diag</cite> in the form of a
K-element list storing all shapes of K diagonal matrix blocks,
where <cite>blk_partition[i]</cite> corresponds to the shape (number of rows and columns)
of the <cite>i</cite> diagonal matrix block.</p></li>
<li><p><strong>dtype</strong> – The data type to set the pricision of diagonal matrix block.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A block diagonal matrix consisting of <cite>K</cite> eye (identity) blocks.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.blk_diag_func.blk_diag_isnumeric">
<code class="sig-prename descclassname">aspire.utils.blk_diag_func.</code><code class="sig-name descname">blk_diag_isnumeric</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.blk_diag_func.blk_diag_isnumeric" title="Permalink to this definition">¶</a></dt>
<dd><p>Check a block diag matrix is numeric or not</p>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.blk_diag_func.blk_diag_minus">
<code class="sig-prename descclassname">aspire.utils.blk_diag_func.</code><code class="sig-name descname">blk_diag_minus</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blk_diag_a</span></em>, <em class="sig-param"><span class="n">blk_diag_b</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.blk_diag_func.blk_diag_minus" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the element subtraction of block diagonal matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>blk_diag_a</strong> – The block diagonal A matrix</p></li>
<li><p><strong>blk_diag_b</strong> – The block diagonal B matrix</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A block diagonal matrix with elements equal to corresponding
subtraction of A from B elements.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.blk_diag_func.blk_diag_mult">
<code class="sig-prename descclassname">aspire.utils.blk_diag_func.</code><code class="sig-name descname">blk_diag_mult</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blk_diag_a</span></em>, <em class="sig-param"><span class="n">blk_diag_b</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.blk_diag_func.blk_diag_mult" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the matrix multiplication of two block diagonal matrices</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>blk_diag_a</strong> – The block diagonal A matrix</p></li>
<li><p><strong>blk_diag_b</strong> – The block diagonal B matrix</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A block diagonal matrix with elements resulted from
the matrix multiplication of A from B block diagonal matrices.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.blk_diag_func.blk_diag_norm">
<code class="sig-prename descclassname">aspire.utils.blk_diag_func.</code><code class="sig-name descname">blk_diag_norm</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blk_diag</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.blk_diag_func.blk_diag_norm" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the 2-norm of a block diagonal matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>blk_diag</strong> – The block diagonal matrix</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The 2-norm of the block diagonal matrix</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.blk_diag_func.blk_diag_partition">
<code class="sig-prename descclassname">aspire.utils.blk_diag_func.</code><code class="sig-name descname">blk_diag_partition</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blk_diag</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.blk_diag_func.blk_diag_partition" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a partition of block diagonal matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>blk_diag</strong> – A block diagonal matrix in the form of a list. Each
element corresponds to a diagonal block.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The matrix block partition of <cite>blk_diag</cite> in the form of a
K-element list storing all shapes of K diagonal matrix blocks,
where <cite>blk_partition[i]</cite> corresponds to the shape (number of rows and columns)
of the <cite>i</cite> diagonal matrix block.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.blk_diag_func.blk_diag_solve">
<code class="sig-prename descclassname">aspire.utils.blk_diag_func.</code><code class="sig-name descname">blk_diag_solve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blk_diag</span></em>, <em class="sig-param"><span class="n">y</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.blk_diag_func.blk_diag_solve" title="Permalink to this definition">¶</a></dt>
<dd><p>Solve a linear system involving a block diagonal matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>blk_diag</strong> – The block diagonal matrix</p></li>
<li><p><strong>y</strong> – The right-hand side in the linear system.  May be a matrix
consisting of  coefficient vectors, in which case each column is
solved for separately.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The result of solving the linear system formed by the matrix.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.blk_diag_func.blk_diag_to_mat">
<code class="sig-prename descclassname">aspire.utils.blk_diag_func.</code><code class="sig-name descname">blk_diag_to_mat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blk_diag</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.blk_diag_func.blk_diag_to_mat" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list representation of block diagonal matrix into full matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>blk_diag</strong> – The block diagonal matrix</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The block diagonal matrix including the zero elements of
non-diagonal blocks.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.blk_diag_func.blk_diag_transpose">
<code class="sig-prename descclassname">aspire.utils.blk_diag_func.</code><code class="sig-name descname">blk_diag_transpose</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blk_diag</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.blk_diag_func.blk_diag_transpose" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the transpose matrix of a block diagonal matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>blk_diag</strong> – The block diagonal matrix</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The corresponding transpose form of a block diagonal matrix</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.blk_diag_func.blk_diag_zeros">
<code class="sig-prename descclassname">aspire.utils.blk_diag_func.</code><code class="sig-name descname">blk_diag_zeros</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blk_partition</span></em>, <em class="sig-param"><span class="n">dtype</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.blk_diag_func.blk_diag_zeros" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a block diagonal zero matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>blk_partition</strong> – The matrix block partition of <cite>blk_diag</cite> in the form of a
K-element list storing all shapes of K diagonal matrix blocks,
where <cite>blk_partition[i]</cite> corresponds to the shape (number of rows and columns)
of the <cite>i</cite> diagonal matrix block.</p></li>
<li><p><strong>dtype</strong> – The data type to set precision of diagonal matrix block.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A block diagonal matrix consisting of <cite>K</cite> zero blocks.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.blk_diag_func.filter_to_fb_mat">
<code class="sig-prename descclassname">aspire.utils.blk_diag_func.</code><code class="sig-name descname">filter_to_fb_mat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">h_fun</span></em>, <em class="sig-param"><span class="n">fbasis</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.blk_diag_func.filter_to_fb_mat" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a nonradial function in k space into a basis representation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>h_fun</strong> – The function form in k space</p></li>
<li><p><strong>fbasis</strong> – The basis object for expanding</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a matrix representation using the <cite>fbasis</cite> expansion</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.blk_diag_func.mat_to_blk_diag">
<code class="sig-prename descclassname">aspire.utils.blk_diag_func.</code><code class="sig-name descname">mat_to_blk_diag</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mat</span></em>, <em class="sig-param"><span class="n">blk_partition</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.blk_diag_func.mat_to_blk_diag" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert full block diagonal matrix into list representation
:param mat; The full block diagonal matrix including the zero elements of</p>
<blockquote>
<div><p>non-diagonal blocks.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>blk_partition</strong> – The matrix block partition of <cite>blk_diag</cite> in the form of a
K-element list storing all shapes of K diagonal matrix blocks,
where <cite>blk_partition[i]</cite> corresponds to the shape (number of rows and columns)
of the <cite>i</cite> diagonal matrix block.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The block diagonal matrix in the list representation of diagonal blocks</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-aspire.utils.cell">
<span id="aspire-utils-cell-module"></span><h2>aspire.utils.cell module<a class="headerlink" href="#module-aspire.utils.cell" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="aspire.utils.cell.Cell2D">
<em class="property">class </em><code class="sig-prename descclassname">aspire.utils.cell.</code><code class="sig-name descname">Cell2D</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rows</span></em>, <em class="sig-param"><span class="n">cols</span></em>, <em class="sig-param"><span class="n">dtype</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.cell.Cell2D" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Define a base class of Cell to perform similar cell functions in MATLAB.</p>
<p class="rubric">Methods</p>
<dl class="py method">
<dt id="aspire.utils.cell.Cell2D.mat2blk_diag">
<code class="sig-name descname">mat2blk_diag</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mat</span></em>, <em class="sig-param"><span class="n">rows</span></em>, <em class="sig-param"><span class="n">cols</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.cell.Cell2D.mat2blk_diag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="aspire.utils.cell.Cell2D.mat2cell">
<code class="sig-name descname">mat2cell</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mat</span></em>, <em class="sig-param"><span class="n">rows</span></em>, <em class="sig-param"><span class="n">cols</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.cell.Cell2D.mat2cell" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-aspire.utils.config">
<span id="aspire-utils-config-module"></span><h2>aspire.utils.config module<a class="headerlink" href="#module-aspire.utils.config" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="aspire.utils.config.Config">
<em class="property">class </em><code class="sig-prename descclassname">aspire.utils.config.</code><code class="sig-name descname">Config</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ini_string</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.config.Config" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p class="rubric">Methods</p>
<dl class="py method">
<dt id="aspire.utils.config.Config.init_from_fp">
<code class="sig-name descname">init_from_fp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ini_fp</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.config.Config.init_from_fp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="aspire.utils.config.Config.init_from_string">
<code class="sig-name descname">init_from_string</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ini_string</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.config.Config.init_from_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="aspire.utils.config.Config.sections">
<code class="sig-name descname">sections</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.config.Config.sections" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="aspire.utils.config.ConfigSection">
<em class="property">class </em><code class="sig-prename descclassname">aspire.utils.config.</code><code class="sig-name descname">ConfigSection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">section_proxy</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.config.ConfigSection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A thin wrapper over a ConfigParser’s SectionProxy object,
that tries to infer the types of values, and makes them available as attributes
Currently int/float/str are supported.</p>
<p class="rubric">Methods</p>
<dl class="py method">
<dt id="aspire.utils.config.ConfigSection.items">
<code class="sig-name descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.config.ConfigSection.items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="aspire.utils.config.config_override">
<code class="sig-prename descclassname">aspire.utils.config.</code><code class="sig-name descname">config_override</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span></em>, <em class="sig-param"><span class="n">config</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.config.config_override" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-aspire.utils.coor_trans">
<span id="aspire-utils-coor-trans-module"></span><h2>aspire.utils.coor_trans module<a class="headerlink" href="#module-aspire.utils.coor_trans" title="Permalink to this headline">¶</a></h2>
<p>General purpose math functions, mostly geometric in nature.</p>
<dl class="py function">
<dt id="aspire.utils.coor_trans.cart2pol">
<code class="sig-prename descclassname">aspire.utils.coor_trans.</code><code class="sig-name descname">cart2pol</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.cart2pol" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Cartesian to Polar Coordinates. All input arguments must be the same shape.
:param x: x-coordinate in Cartesian space
:param y: y-coordinate in Cartesian space
:return: A 2-tuple of values:</p>
<blockquote>
<div><p>theta: angular coordinate/azimuth
r: radial distance from origin</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.coor_trans.cart2sph">
<code class="sig-prename descclassname">aspire.utils.coor_trans.</code><code class="sig-name descname">cart2sph</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">z</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.cart2sph" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform cartesian coordinates to spherical. All input arguments must be the same shape.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – X-values of input co-ordinates.</p></li>
<li><p><strong>y</strong> – Y-values of input co-ordinates.</p></li>
<li><p><strong>z</strong> – Z-values of input co-ordinates.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A 3-tuple of values, all of the same shape as the inputs.
(&lt;azimuth&gt;, &lt;elevation&gt;, &lt;radius&gt;)</p>
</dd>
</dl>
<p>azimuth and elevation are returned in radians.</p>
<p>This function is equivalent to MATLAB’s cart2sph function.</p>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.coor_trans.grid_1d">
<code class="sig-prename descclassname">aspire.utils.coor_trans.</code><code class="sig-name descname">grid_1d</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n</span></em>, <em class="sig-param"><span class="n">shifted</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">normalized</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.grid_1d" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate one dimensional grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> – the number of grid points.</p></li>
<li><p><strong>shifted</strong> – shifted by half of grid or not when n is even.</p></li>
<li><p><strong>normalized</strong> – normalize the grid in the range of (-1, 1) or not.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the rectangular and polar coordinates of all grid points.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.coor_trans.grid_2d">
<code class="sig-prename descclassname">aspire.utils.coor_trans.</code><code class="sig-name descname">grid_2d</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n</span></em>, <em class="sig-param"><span class="n">shifted</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">normalized</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.grid_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate two dimensional grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> – the number of grid points in each dimension.</p></li>
<li><p><strong>shifted</strong> – shifted by half of grid or not when n is even.</p></li>
<li><p><strong>normalized</strong> – normalize the grid in the range of (-1, 1) or not.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the rectangular and polar coordinates of all grid points.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.coor_trans.grid_3d">
<code class="sig-prename descclassname">aspire.utils.coor_trans.</code><code class="sig-name descname">grid_3d</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n</span></em>, <em class="sig-param"><span class="n">shifted</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">normalized</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.grid_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate three dimensional grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> – the number of grid points in each dimension.</p></li>
<li><p><strong>shifted</strong> – shifted by half of grid or not when n is even.</p></li>
<li><p><strong>normalized</strong> – normalize the grid in the range of (-1, 1) or not.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the rectangular and spherical coordinates of all grid points.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.coor_trans.q_to_rot">
<code class="sig-prename descclassname">aspire.utils.coor_trans.</code><code class="sig-name descname">q_to_rot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">q</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.q_to_rot" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the quaternions into a rotation matrices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>q</strong> – Array of quaternions. May be a vector of dimensions 4 x n</p>
</dd>
<dt class="field-even">Return rot_mat</dt>
<dd class="field-even"><p>n-by-3-by-3 array of 3x3 rotation matrices.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.coor_trans.qrand">
<code class="sig-prename descclassname">aspire.utils.coor_trans.</code><code class="sig-name descname">qrand</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nrot</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.qrand" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a set of quaternions from random normal distribution.</p>
<p>Each quaternions is a four-elements column vector. Returns a matrix of
size 4xn.</p>
<p>The 3-sphere S^3 in R^4 is a double cover of the rotation group SO(3), SO(3) = RP^3.
We identify unit norm quaternions a^2+b^2+c^2+d^2=1 with group elements.
The antipodal points (-a,-b,-c,-d) and (a,b,c,d) are identified as the same group elements,
so we take a&gt;=0.
:param nrot: The number of quaternions for rotations.
:param seed: The random seed.
:return: An array consists of 4 dimensions quaternions</p>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.coor_trans.qrand_rots">
<code class="sig-prename descclassname">aspire.utils.coor_trans.</code><code class="sig-name descname">qrand_rots</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nrot</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.qrand_rots" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate random rotations from quaternions</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nrot</strong> – The totalArray of quaternions. May be a vector of dimensions 4 x n</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array of 3x3 rotation matrices.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.coor_trans.uniform_random_angles">
<code class="sig-prename descclassname">aspire.utils.coor_trans.</code><code class="sig-name descname">uniform_random_angles</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.uniform_random_angles" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate random 3D rotation angles
:param n: The number of rotation angles to generate
:param seed: Random integer seed to use. If None, the current random state is used.
:return: A n-by-3 ndarray of rotation angles</p>
</dd></dl>

</div>
<div class="section" id="module-aspire.utils.em">
<span id="aspire-utils-em-module"></span><h2>aspire.utils.em module<a class="headerlink" href="#module-aspire.utils.em" title="Permalink to this headline">¶</a></h2>
<p>Utility functions for Electron-Microscopy</p>
<dl class="py function">
<dt id="aspire.utils.em.voltage_to_wavelength">
<code class="sig-prename descclassname">aspire.utils.em.</code><code class="sig-name descname">voltage_to_wavelength</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">voltage</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.em.voltage_to_wavelength" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert from electron voltage to wavelength.
:param voltage: float, The electron voltage in kV.
:return: float, The electron wavelength in nm.</p>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.em.wavelength_to_voltage">
<code class="sig-prename descclassname">aspire.utils.em.</code><code class="sig-name descname">wavelength_to_voltage</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wavelength</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.em.wavelength_to_voltage" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert from electron voltage to wavelength.
:param wavelength: float, The electron wavelength in nm.
:return: float, The electron voltage in kV.</p>
</dd></dl>

</div>
<div class="section" id="module-aspire.utils.fft">
<span id="aspire-utils-fft-module"></span><h2>aspire.utils.fft module<a class="headerlink" href="#module-aspire.utils.fft" title="Permalink to this headline">¶</a></h2>
<p>FFT/IFFT utilities</p>
<dl class="py function">
<dt id="aspire.utils.fft.centered_fft1">
<code class="sig-prename descclassname">aspire.utils.fft.</code><code class="sig-name descname">centered_fft1</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.fft.centered_fft1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="aspire.utils.fft.centered_fft2">
<code class="sig-prename descclassname">aspire.utils.fft.</code><code class="sig-name descname">centered_fft2</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.fft.centered_fft2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="aspire.utils.fft.centered_fft3">
<code class="sig-prename descclassname">aspire.utils.fft.</code><code class="sig-name descname">centered_fft3</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.fft.centered_fft3" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="aspire.utils.fft.centered_ifft1">
<code class="sig-prename descclassname">aspire.utils.fft.</code><code class="sig-name descname">centered_ifft1</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.fft.centered_ifft1" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate a centered, one-dimensional inverse FFT
:param x: The one-dimensional signal to be transformed.</p>
<blockquote>
<div><p>The inverse FFT is only applied along the first dimension.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The centered inverse Fourier transform of x.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.fft.centered_ifft2">
<code class="sig-prename descclassname">aspire.utils.fft.</code><code class="sig-name descname">centered_ifft2</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.fft.centered_ifft2" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate a centered, two-dimensional inverse FFT
:param x: The two-dimensional signal to be transformed.</p>
<blockquote>
<div><p>The inverse FFT is only applied along the first two dimensions.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The centered inverse Fourier transform of x.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.fft.centered_ifft3">
<code class="sig-prename descclassname">aspire.utils.fft.</code><code class="sig-name descname">centered_ifft3</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.fft.centered_ifft3" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate a centered, three-dimensional inverse FFT
:param x: The three-dimensional signal to be transformed.</p>
<blockquote>
<div><p>The inverse FFT is only applied along the first three dimensions.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The centered inverse Fourier transform of x.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.fft.mdim_fftshift">
<code class="sig-prename descclassname">aspire.utils.fft.</code><code class="sig-name descname">mdim_fftshift</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">dims</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.fft.mdim_fftshift" title="Permalink to this definition">¶</a></dt>
<dd><p>Multi-dimensional FFT shift</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – The array to be shifted.</p></li>
<li><p><strong>dims</strong> – An array of dimension indices along which the shift should occur.
If None, the shift is performed along all dimensions.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The x array shifted along the desired dimensions.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.fft.mdim_ifftshift">
<code class="sig-prename descclassname">aspire.utils.fft.</code><code class="sig-name descname">mdim_ifftshift</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">dims</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.fft.mdim_ifftshift" title="Permalink to this definition">¶</a></dt>
<dd><p>Multi-dimensional FFT unshift
:param x: The array to be unshifted.
:param dims: An array of dimension indices along which the unshift should occur.</p>
<blockquote>
<div><p>If None, the unshift is performed along all dimensions.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The x array unshifted along the desired dimensions.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-aspire.utils.filters">
<span id="aspire-utils-filters-module"></span><h2>aspire.utils.filters module<a class="headerlink" href="#module-aspire.utils.filters" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="aspire.utils.filters.ArrayFilter">
<em class="property">class </em><code class="sig-prename descclassname">aspire.utils.filters.</code><code class="sig-name descname">ArrayFilter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xfer_fn_array</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.filters.ArrayFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aspire.utils.filters.Filter" title="aspire.utils.filters.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">aspire.utils.filters.Filter</span></code></a></p>
<p>A Filter corresponding to the filter with the specified transfer function.
:param xfer_fn_array: The transfer function of the filter in the form of an array of one or two dimensions.</p>
<p class="rubric">Methods</p>
<dl class="py method">
<dt id="aspire.utils.filters.ArrayFilter.scale">
<code class="sig-name descname">scale</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">c</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.filters.ArrayFilter.scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Scale filter by a constant factor
:param c: The scaling factor. For c &lt; 1, it dilates the filter(s) in frequency, while for c &gt; 1,</p>
<blockquote>
<div><p>it compresses (default 1).</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>On return, attributes of the calling object are properly adjusted in place to effect scaling.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="aspire.utils.filters.CTFFilter">
<em class="property">class </em><code class="sig-prename descclassname">aspire.utils.filters.</code><code class="sig-name descname">CTFFilter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pixel_size</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">voltage</span><span class="o">=</span><span class="default_value">200</span></em>, <em class="sig-param"><span class="n">defocus_u</span><span class="o">=</span><span class="default_value">15000</span></em>, <em class="sig-param"><span class="n">defocus_v</span><span class="o">=</span><span class="default_value">15000</span></em>, <em class="sig-param"><span class="n">defocus_ang</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">Cs</span><span class="o">=</span><span class="default_value">2.26</span></em>, <em class="sig-param"><span class="n">alpha</span><span class="o">=</span><span class="default_value">0.07</span></em>, <em class="sig-param"><span class="n">B</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.filters.CTFFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aspire.utils.filters.Filter" title="aspire.utils.filters.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">aspire.utils.filters.Filter</span></code></a></p>
<p>A CTF (Contrast Transfer Function) Filter</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pixel_size</strong> – Pixel size in angstrom</p></li>
<li><p><strong>voltage</strong> – Electron voltage in kV</p></li>
<li><p><strong>defocus_u</strong> – Defocus depth along the u-axis in angstrom</p></li>
<li><p><strong>defocus_v</strong> – Defocus depth along the v-axis in angstrom</p></li>
<li><p><strong>defocus_ang</strong> – Angle between the x-axis and the u-axis in radians</p></li>
<li><p><strong>Cs</strong> – Spherical aberration constant</p></li>
<li><p><strong>alpha</strong> – Amplitude contrast phase in radians</p></li>
<li><p><strong>B</strong> – Envelope decay in inverse square angstrom (default 0)</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Methods</p>
<dl class="py method">
<dt id="aspire.utils.filters.CTFFilter.scale">
<code class="sig-name descname">scale</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">c</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.filters.CTFFilter.scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Scale filter by a constant factor
:param c: The scaling factor. For c &lt; 1, it dilates the filter(s) in frequency, while for c &gt; 1,</p>
<blockquote>
<div><p>it compresses (default 1).</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>On return, attributes of the calling object are properly adjusted in place to effect scaling.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="aspire.utils.filters.Filter">
<em class="property">class </em><code class="sig-prename descclassname">aspire.utils.filters.</code><code class="sig-name descname">Filter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dim</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">radial</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.filters.Filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p class="rubric">Methods</p>
<dl class="py method">
<dt id="aspire.utils.filters.Filter.evaluate">
<code class="sig-name descname">evaluate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">omega</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.filters.Filter.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate the filter at specified frequencies.
:param omega: A vector of size n (for 1d filters), or an array of size 2-by-n, representing the spatial</p>
<blockquote>
<div><p>frequencies at which the filter is to be evaluated. These are normalized so that pi is equal to the Nyquist
frequency.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The value of the filter at the specified frequencies.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aspire.utils.filters.Filter.evaluate_grid">
<code class="sig-name descname">evaluate_grid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">L</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.filters.Filter.evaluate_grid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="aspire.utils.filters.Filter.fb_mat">
<code class="sig-name descname">fb_mat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fbasis</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.filters.Filter.fb_mat" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the filter in FB basis matrix</p>
</dd></dl>

<dl class="py method">
<dt id="aspire.utils.filters.Filter.scale">
<code class="sig-name descname">scale</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">c</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.filters.Filter.scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Scale filter by a constant factor
:param c: The scaling factor. For c &lt; 1, it dilates the filter(s) in frequency, while for c &gt; 1,</p>
<blockquote>
<div><p>it compresses (default 1).</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>On return, attributes of the calling object are properly adjusted in place to effect scaling.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="aspire.utils.filters.FunctionFilter">
<em class="property">class </em><code class="sig-prename descclassname">aspire.utils.filters.</code><code class="sig-name descname">FunctionFilter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">dim</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.filters.FunctionFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aspire.utils.filters.Filter" title="aspire.utils.filters.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">aspire.utils.filters.Filter</span></code></a></p>
<p>A Filter object that is instantiated directly using a 1D or 2D function, which is then directly used for evaluating
the filter.</p>
<p class="rubric">Methods</p>
</dd></dl>

<dl class="py class">
<dt id="aspire.utils.filters.IdentityFilter">
<em class="property">class </em><code class="sig-prename descclassname">aspire.utils.filters.</code><code class="sig-name descname">IdentityFilter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dim</span><span class="o">=</span><span class="default_value">2</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.filters.IdentityFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aspire.utils.filters.ScalarFilter" title="aspire.utils.filters.ScalarFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">aspire.utils.filters.ScalarFilter</span></code></a></p>
<p class="rubric">Methods</p>
</dd></dl>

<dl class="py class">
<dt id="aspire.utils.filters.MultiplicativeFilter">
<em class="property">class </em><code class="sig-prename descclassname">aspire.utils.filters.</code><code class="sig-name descname">MultiplicativeFilter</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.filters.MultiplicativeFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aspire.utils.filters.Filter" title="aspire.utils.filters.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">aspire.utils.filters.Filter</span></code></a></p>
<p>A Filter object that returns the product of the evaluation of its individual filters</p>
<p class="rubric">Methods</p>
</dd></dl>

<dl class="py class">
<dt id="aspire.utils.filters.PowerFilter">
<em class="property">class </em><code class="sig-prename descclassname">aspire.utils.filters.</code><code class="sig-name descname">PowerFilter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filter</span></em>, <em class="sig-param"><span class="n">power</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.filters.PowerFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aspire.utils.filters.Filter" title="aspire.utils.filters.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">aspire.utils.filters.Filter</span></code></a></p>
<p>A Filter object that is composed of a regular <cite>Filter</cite> object, but evaluates it to a specified power.</p>
<p class="rubric">Methods</p>
</dd></dl>

<dl class="py class">
<dt id="aspire.utils.filters.RadialCTFFilter">
<em class="property">class </em><code class="sig-prename descclassname">aspire.utils.filters.</code><code class="sig-name descname">RadialCTFFilter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pixel_size</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">voltage</span><span class="o">=</span><span class="default_value">200</span></em>, <em class="sig-param"><span class="n">defocus</span><span class="o">=</span><span class="default_value">15000</span></em>, <em class="sig-param"><span class="n">Cs</span><span class="o">=</span><span class="default_value">2.26</span></em>, <em class="sig-param"><span class="n">alpha</span><span class="o">=</span><span class="default_value">0.07</span></em>, <em class="sig-param"><span class="n">B</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.filters.RadialCTFFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aspire.utils.filters.CTFFilter" title="aspire.utils.filters.CTFFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">aspire.utils.filters.CTFFilter</span></code></a></p>
<p>A CTF (Contrast Transfer Function) Filter</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pixel_size</strong> – Pixel size in angstrom</p></li>
<li><p><strong>voltage</strong> – Electron voltage in kV</p></li>
<li><p><strong>defocus_u</strong> – Defocus depth along the u-axis in angstrom</p></li>
<li><p><strong>defocus_v</strong> – Defocus depth along the v-axis in angstrom</p></li>
<li><p><strong>defocus_ang</strong> – Angle between the x-axis and the u-axis in radians</p></li>
<li><p><strong>Cs</strong> – Spherical aberration constant</p></li>
<li><p><strong>alpha</strong> – Amplitude contrast phase in radians</p></li>
<li><p><strong>B</strong> – Envelope decay in inverse square angstrom (default 0)</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Methods</p>
</dd></dl>

<dl class="py class">
<dt id="aspire.utils.filters.ScalarFilter">
<em class="property">class </em><code class="sig-prename descclassname">aspire.utils.filters.</code><code class="sig-name descname">ScalarFilter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dim</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">value</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.filters.ScalarFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aspire.utils.filters.Filter" title="aspire.utils.filters.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">aspire.utils.filters.Filter</span></code></a></p>
<p class="rubric">Methods</p>
<dl class="py method">
<dt id="aspire.utils.filters.ScalarFilter.scale">
<code class="sig-name descname">scale</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">c</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.filters.ScalarFilter.scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Scale filter by a constant factor
:param c: The scaling factor. For c &lt; 1, it dilates the filter(s) in frequency, while for c &gt; 1,</p>
<blockquote>
<div><p>it compresses (default 1).</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>On return, attributes of the calling object are properly adjusted in place to effect scaling.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="aspire.utils.filters.ZeroFilter">
<em class="property">class </em><code class="sig-prename descclassname">aspire.utils.filters.</code><code class="sig-name descname">ZeroFilter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dim</span><span class="o">=</span><span class="default_value">2</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.filters.ZeroFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aspire.utils.filters.ScalarFilter" title="aspire.utils.filters.ScalarFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">aspire.utils.filters.ScalarFilter</span></code></a></p>
<p class="rubric">Methods</p>
</dd></dl>

</div>
<div class="section" id="module-aspire.utils.matlab_compat">
<span id="aspire-utils-matlab-compat-module"></span><h2>aspire.utils.matlab_compat module<a class="headerlink" href="#module-aspire.utils.matlab_compat" title="Permalink to this headline">¶</a></h2>
<p>Functions for compatibility with MATLAB behavior.
At some point when the package is full validated against MatLab, the ‘order’ arguments in the functions here
can be changed to ‘C’, and subsequently, this package deprecated altogether (i.e. the reshape/flatten methods used
directly by the caller).</p>
<dl class="py class">
<dt id="aspire.utils.matlab_compat.Random">
<em class="property">class </em><code class="sig-prename descclassname">aspire.utils.matlab_compat.</code><code class="sig-name descname">Random</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matlab_compat.Random" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A context manager that pushes a random seed to the stack for reproducible results,
and pops it on exit.</p>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matlab_compat.m_flatten">
<code class="sig-prename descclassname">aspire.utils.matlab_compat.</code><code class="sig-name descname">m_flatten</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matlab_compat.m_flatten" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="aspire.utils.matlab_compat.m_reshape">
<code class="sig-prename descclassname">aspire.utils.matlab_compat.</code><code class="sig-name descname">m_reshape</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">new_shape</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matlab_compat.m_reshape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="aspire.utils.matlab_compat.rand">
<code class="sig-prename descclassname">aspire.utils.matlab_compat.</code><code class="sig-name descname">rand</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matlab_compat.rand" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="aspire.utils.matlab_compat.randi">
<code class="sig-prename descclassname">aspire.utils.matlab_compat.</code><code class="sig-name descname">randi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">i_max</span></em>, <em class="sig-param"><span class="n">size</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matlab_compat.randi" title="Permalink to this definition">¶</a></dt>
<dd><p>A MATLAB compatible randi implementation that returns numbers from a discrete uniform distribution.
While a direct use of np.random.choice would be convenient, this doesn’t seem to return results
identical to MATLAB.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iMax</strong> – TODO</p></li>
<li><p><strong>size</strong> – size of the resulting np array</p></li>
<li><p><strong>seed</strong> – Random seed to use (None to apply no seed)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A np array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matlab_compat.randn">
<code class="sig-prename descclassname">aspire.utils.matlab_compat.</code><code class="sig-name descname">randn</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matlab_compat.randn" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls rand and applies inverse transform sampling to the output.</p>
</dd></dl>

</div>
<div class="section" id="module-aspire.utils.matrix">
<span id="aspire-utils-matrix-module"></span><h2>aspire.utils.matrix module<a class="headerlink" href="#module-aspire.utils.matrix" title="Permalink to this headline">¶</a></h2>
<p>Utilties for arrays/n-dimensional matrices.</p>
<dl class="py function">
<dt id="aspire.utils.matrix.acorr">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">acorr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">axes</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.acorr" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate array correlation along given axes
:param x: An array of arbitrary shape
:param y: An array of same shape as x
:param axes: The axis along which to compute the correlation. If None, the correlation is calculated along all axes.
:return: The correlation of x along specified axes.</p>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.ainner">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">ainner</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">axes</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.ainner" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate array inner product along given axes
:param x: An array of arbitrary shape
:param y: An array of same shape as x
:param axes: The axis along which to compute the inner product. If None, the product is calculated along all axes.
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.anorm">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">anorm</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">axes</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.anorm" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate array norm along given axes
:param x: An array of arbitrary size and shape.
:param axes: The axis along which to compute the norm. If None, the norm is calculated along all axes.
:return: The Euclidean (l^2) norm of x along specified axes.</p>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.eigs">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">eigs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">A</span></em>, <em class="sig-param"><span class="n">k</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.eigs" title="Permalink to this definition">¶</a></dt>
<dd><p>Multidimensional partial eigendecomposition
:param A: An array of size <cite>sig_sz</cite>-by-<cite>sig_sz</cite>, where <cite>sig_sz</cite> is a size containing d dimensions.</p>
<blockquote>
<div><p>The array represents a matrix with d indices for its rows and columns.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>k</strong> – The number of eigenvalues and eigenvectors to calculate (default 6).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A 2-tuple of values
V: An array of eigenvectors of size <cite>sig_sz</cite>-by-k.
D: A matrix of size k-by-k containing the corresponding eigenvalues in the diagonals.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.im_to_vec">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">im_to_vec</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">im</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.im_to_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Roll up images into vectors
:param im: An N-by-N-by-… array.
:return: An N^2-by-… array.</p>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.make_symmat">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">make_symmat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">A</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.make_symmat" title="Permalink to this definition">¶</a></dt>
<dd><p>Symmetrize a matrix
:param A: A matrix.
:return: The Hermitian matrix (A+A’)/2.</p>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.mat_to_vec">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">mat_to_vec</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mat</span></em>, <em class="sig-param"><span class="n">is_symmat</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.mat_to_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a matrix into vectorized form
:param mat: An array of size N-by-N-by-… containing the matrices to be vectorized.
:param is_symmat: Specifies whether the matrices are symmetric/Hermitian, in which case they are stored in packed</p>
<blockquote>
<div><p>form using symmat_to_vec (default False).</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The vectorized form of the matrices, with dimension N^2-by-… or N*(N+1)/2-by-… depending on the value
of is_symmat.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.mdim_mat_fun_conj">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">mdim_mat_fun_conj</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">d1</span></em>, <em class="sig-param"><span class="n">d2</span></em>, <em class="sig-param"><span class="n">f</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.mdim_mat_fun_conj" title="Permalink to this definition">¶</a></dt>
<dd><p>Conjugate a multidimensional matrix using a linear mapping
:param X: An N_1-by-…-by-N_d1-by-N_1…-by-N_d1-by-… array, with the first 2*d1 dimensions corresponding to</p>
<blockquote>
<div><p>matrices with columns and rows of dimension d1.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d1</strong> – The dimension of the input matrix X</p></li>
<li><p><strong>d2</strong> – The dimension of the output matrix Y</p></li>
<li><p><strong>f</strong> – A function handle of a linear map that takes an array of size N_1-by-…-by-N_d1-by-… and returns an
array of size M_1-by-…-by-M_d2-by-… .</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An array of size M_1-by-…-by-M_d2-by-M_1-by-…-by-M_d2-by-… resulting from applying fun to the rows
and columns of the multidimensional matrix X.</p>
</dd>
</dl>
<p>TODO: Very complicated to wrap head around this one!</p>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.roll_dim">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">roll_dim</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">dim</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.roll_dim" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.shrink_covar">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">shrink_covar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">covar_in</span></em>, <em class="sig-param"><span class="n">noise_var</span></em>, <em class="sig-param"><span class="n">gamma</span></em>, <em class="sig-param"><span class="n">shrinker</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.shrink_covar" title="Permalink to this definition">¶</a></dt>
<dd><p>Shrink the covariance matrix
:param covar_in: An input covariance matrix
:param noise_var: The estimated variance of noise
:param gamma: An input parameter to specify the maximum values of eigen values to be neglected.
:param shrinker: An input parameter to select different shrinking methods.
:return: The shrinked covariance matrix</p>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.symmat_to_vec">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">symmat_to_vec</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mat</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.symmat_to_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Packs a symmetric matrix into a lower triangular vector
:param mat: An array of size N-by-N-by-… where the first two dimensions constitute symmetric or</p>
<blockquote>
<div><p>Hermitian matrices.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A vector of size N*(N+1)/2-by-… consisting of the lower triangular part of each matrix.</p>
</dd>
</dl>
<p>Note that a lot of acrobatics happening here (swapaxes/triu instead of tril etc.) are so that we can get
column-major ordering of elements (to get behavior consistent with MATLAB), since masking in numpy only returns
data in row-major order.</p>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.symmat_to_vec_iso">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">symmat_to_vec_iso</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mat</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.symmat_to_vec_iso" title="Permalink to this definition">¶</a></dt>
<dd><p>Isometrically maps a symmetric matrix to a packed vector
:param mat: An array of size N-by-N-by-… where the first two dimensions constitute symmetric or Hermitian</p>
<blockquote>
<div><p>matrices.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A vector of size N*(N+1)/2-by-… consisting of the lower triangular part of each matrix, reweighted so
that the Frobenius inner product is mapped to the Euclidean inner product.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.unroll_dim">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">unroll_dim</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">dim</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.unroll_dim" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.vec_to_im">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">vec_to_im</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.vec_to_im" title="Permalink to this definition">¶</a></dt>
<dd><p>Unroll vectors to images
:param X: N^2-by-… array.
:return: An N-by-N-by-… array.</p>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.vec_to_mat">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">vec_to_mat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">vec</span></em>, <em class="sig-param"><span class="n">is_symmat</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.vec_to_mat" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a vectorized matrix into a matrix
:param vec: The vectorized representations. If the matrix is non-symmetric, this array has the dimensions</p>
<blockquote>
<div><p>N^2-by-…, but if the matrix is symmetric, the dimensions are N*(N+1)/2-by-… .</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>is_symmat</strong> – True if the vectors represent symmetric matrices (default False)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The array of size N-by-N-by-… representing the matrices.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.vec_to_symmat">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">vec_to_symmat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">vec</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.vec_to_symmat" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert packed lower triangular vector to symmetric matrix
:param vec: A vector of size N*(N+1)/2-by-… describing a symmetric (or Hermitian) matrix.
:return: An array of size N-by-N-by-… which indexes symmetric/Hermitian matrices that occupy the first two</p>
<blockquote>
<div><p>dimensions. The lower triangular parts of these matrices consists of the corresponding vectors in vec.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.vec_to_symmat_iso">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">vec_to_symmat_iso</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">vec</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.vec_to_symmat_iso" title="Permalink to this definition">¶</a></dt>
<dd><p>Isometrically map packed vector to symmetric matrix
:param vec: A vector of size N*(N+1)/2-by-… describing a symmetric (or Hermitian) matrix.
:return: An array of size N-by-N-by-… which indexes symmetric/Hermitian matrices that occupy the first two</p>
<blockquote>
<div><p>dimensions. The lower triangular parts of these matrices consists of the corresponding vectors in vec,
reweighted so that the Euclidean inner product maps to the Frobenius inner product.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.vec_to_vol">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">vec_to_vol</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.vec_to_vol" title="Permalink to this definition">¶</a></dt>
<dd><p>Unroll vectors to volumes
:param X: N^3-by-… array.
:return: An N-by-N-by-N-by-… array.</p>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.vecmat_to_volmat">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">vecmat_to_volmat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.vecmat_to_volmat" title="Permalink to this definition">¶</a></dt>
<dd><p>Roll up vector matrices into volume matrices
:param X: A vector matrix of size L1^3-by-L2^3-by-…
:return: A volume “matrix” of size L1-by-L1-by-L1-by-L2-by-L2-by-L2-by-…</p>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.vol_to_vec">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">vol_to_vec</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.vol_to_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Roll up volumes into vectors
:param X: N-by-N-by-N-by-… array.
:return: An N^3-by-… array.</p>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.matrix.volmat_to_vecmat">
<code class="sig-prename descclassname">aspire.utils.matrix.</code><code class="sig-name descname">volmat_to_vecmat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.volmat_to_vecmat" title="Permalink to this definition">¶</a></dt>
<dd><p>Unroll volume matrices to vector matrices
:param X: A volume “matrix” of size L1-by-L1-by-L1-by-L2-by-L2-by-L2-by-…
:return: A vector matrix of size L1^3-by-L2^3-by-…</p>
</dd></dl>

</div>
<div class="section" id="module-aspire.utils.misc">
<span id="aspire-utils-misc-module"></span><h2>aspire.utils.misc module<a class="headerlink" href="#module-aspire.utils.misc" title="Permalink to this headline">¶</a></h2>
<p>Miscellaneous Utilities that have no better place (yet).</p>
<dl class="py function">
<dt id="aspire.utils.misc.qr_vols_forward">
<code class="sig-prename descclassname">aspire.utils.misc.</code><code class="sig-name descname">qr_vols_forward</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">s</span></em>, <em class="sig-param"><span class="n">n</span></em>, <em class="sig-param"><span class="n">vols</span></em>, <em class="sig-param"><span class="n">k</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.misc.qr_vols_forward" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO: Write docstring
TODO: Find a better place for this!
:param sim:
:param s:
:param n:
:param vols:
:param k:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.misc.src_wiener_coords">
<code class="sig-prename descclassname">aspire.utils.misc.</code><code class="sig-name descname">src_wiener_coords</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">mean_vol</span></em>, <em class="sig-param"><span class="n">eig_vols</span></em>, <em class="sig-param"><span class="n">lambdas</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">noise_var</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">batch_size</span><span class="o">=</span><span class="default_value">512</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.misc.src_wiener_coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate coordinates using Wiener filter
:param sim: A simulation object containing the images whose coordinates we want.
:param mean_vol: The mean volume of the source in an L-by-L-by-L array.
:param eig_vols: The eigenvolumes of the source in an L-by-L-by-L-by-K array.
:param lambdas: The eigenvalues in a K-by-K diagonal matrix (default <cite>eye(K)</cite>).
:param noise_var: The variance of the noise in the images (default 0).
:param batch_size: The size of the batches in which to compute the coordinates (default 512).
:return: A K-by-<cite>src.n</cite> array of coordinates corresponding to the Wiener filter coordinates of each image in sim.</p>
<dl class="simple">
<dt>The coordinates are obtained by the formula</dt><dd><p>alpha_s = eig_vols^T H_s ( y_s - P_s mean_vol ) ,</p>
</dd>
<dt>where P_s is the forward image mapping and y_s is the sth image,</dt><dd><p>H_s = Sigma * P_s^T ( P_s Sigma P_s^T + noise_var I )^(-1) ,</p>
</dd>
</dl>
<p>and Sigma is the covariance matrix eig_vols * lambdas * eig_vols^T.
Note that when noise_var is zero, this reduces to the projecting y_s onto the span of P_s eig_vols.</p>
<p># TODO: Find a better place for this functionality other than in utils</p>
</dd></dl>

</div>
<div class="section" id="module-aspire.utils.optimize">
<span id="aspire-utils-optimize-module"></span><h2>aspire.utils.optimize module<a class="headerlink" href="#module-aspire.utils.optimize" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="aspire.utils.optimize.conj_grad">
<code class="sig-prename descclassname">aspire.utils.optimize.</code><code class="sig-name descname">conj_grad</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">a_fun</span></em>, <em class="sig-param"><span class="n">b</span></em>, <em class="sig-param"><span class="n">cg_opt</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">init</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.optimize.conj_grad" title="Permalink to this definition">¶</a></dt>
<dd><p>Conjugate Gradient method to solve the linear system.</p>
<p>This is corresponding to the implemented version in the ASPIRE Matlab package.
:param a_fun:  A function handle specifying the linear operation x -&gt; Ax.</p>
<blockquote>
<div><p>When multiple right-hand sides are supplied, this function takes as
input an array of shape (n, p), where n is the number of right-hand
sides and p is the dimension of the space.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>b</strong> – The vector consisting of the right hand side of Ax = b. Again,
n different right-hand sides are given by supplying an array of shape
(n, p).</p></li>
<li><p><strong>cg_opt</strong> – <p>The parameters for the conjugate gradient method, including:
max_iter: Maximum number of iterations (default 50).
verbose: The extent to which information on progress should be</p>
<blockquote>
<div><p>output to the terminal (default 1).</p>
</div></blockquote>
<dl class="simple">
<dt>iter_callback: If non-empty, specifies a function to be called at</dt><dd><p>the end of every iteration. In this case, iter_callback must be a
function handle taking as single argument the info structure at
the current iteration. For information on the info structure,
see below (default []).</p>
</dd>
<dt>preconditioner: If non-empty, specifies a preconditioner to be</dt><dd><p>used in every iteration as a function handle defining the linear
operator x -&gt; Px (default []).</p>
</dd>
<dt>rel_tolerance: The relative error at which to stop the algorithm,</dt><dd><p>even if it has not yet reached the maximum number of iterations
(default 1e-15).</p>
</dd>
<dt>store_iterates: Defines whether to store each intermediate results</dt><dd><p>in the info structure under the x, p and r fields. Since this
may require a large amount of memory, this is not recommended
(default false).</p>
</dd>
</dl>
</p></li>
<li><p><strong>init</strong> – A structure specifying the starting point of the algorithm.
This can contain values of x or p that will be used for initialization
(default empty).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>The output result includes:
x: The result of the conjugate gradient method after max_iter iterations</p>
<blockquote>
<div><p>or once the residual norm has decreased below rel_tolerance, relative.</p>
</div></blockquote>
<p>obj: The value of the objective function at the last iteration.
info: A structure array containing intermediate information obtained
during each iteration. These fields include:
- iter: The iteration number.
- x (for store_iterates true): The value of x.
- r (for store_iterates true): The residual vector.
- p (for store_iterates true): The p vector.
- res: The square norm of the residual.
- obj: The objective function.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.optimize.fill_struct">
<code class="sig-prename descclassname">aspire.utils.optimize.</code><code class="sig-name descname">fill_struct</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">att_vals</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.optimize.fill_struct" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill object with attributes in a dictionary.</p>
<p>If a struct is not given a new object will be created and filled.
If the given struct has a field in att_vals, the original field will stay,
unless specified otherwise in overwrite.
att_vals is a dictionary with string keys, and for each key:
if hasattr(s, key) and key in overwrite:</p>
<blockquote>
<div><p>pass</p>
</div></blockquote>
<dl class="simple">
<dt>else:</dt><dd><p>setattr(s, key, att_vals[key])</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – </p></li>
<li><p><strong>att_vals</strong> – </p></li>
</ul>
</dd>
</dl>
<p>:param overwrite
:return:</p>
</dd></dl>

</div>
<div class="section" id="module-aspire.utils.preprocess">
<span id="aspire-utils-preprocess-module"></span><h2>aspire.utils.preprocess module<a class="headerlink" href="#module-aspire.utils.preprocess" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="aspire.utils.preprocess.crop_pad">
<code class="sig-prename descclassname">aspire.utils.preprocess.</code><code class="sig-name descname">crop_pad</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mat</span></em>, <em class="sig-param"><span class="n">n</span></em>, <em class="sig-param"><span class="n">fill_value</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.preprocess.crop_pad" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce the size of a vector, square or cube ‘mat’ by cropping (or
increase the size by padding with fill_value, by default zero) to a final
size of n, (n x n), or (n x n x n) respectively. This is the analogue of downsample, but
it doesn’t change magnification.</p>
<p>If mat is 2-dimensional and n is a vector, m is cropped to n=[mat_x mat_y].</p>
<p>The function handles odd and even-sized arrays correctly. The center of
an odd array is taken to be at (n+1)/2, and an even array is n/2+1.</p>
<p>If flag is_stack is set to True, then a 3D array ‘mat’ is treated as a stack of 2D
images, and each image is cropped to (n x n).</p>
<p>For 2D images, the input image doesn’t have to be square.</p>
<ul class="simple">
<li><p>The original MATLAB function supported cropping to non-square matrices.
As real-world uses will always crop to square (n, n), we don’t support it with Python.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mat</strong> – Vector, 2D array, stack of 2D arrays or a 3D array</p></li>
<li><p><strong>n</strong> – Size of desired cropped vector, side of 2D array or side of 3D array</p></li>
<li><p><strong>fill_value</strong> – Padding value. Defaults to 0.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Cropped or padded mat to size of n, (n x n) or (n x n x n)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.preprocess.downsample">
<code class="sig-prename descclassname">aspire.utils.preprocess.</code><code class="sig-name descname">downsample</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">insamples</span></em>, <em class="sig-param"><span class="n">szout</span></em>, <em class="sig-param"><span class="n">mask</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.preprocess.downsample" title="Permalink to this definition">¶</a></dt>
<dd><p>Blur and downsample 1D to 3D objects such as, curves, images or volumes</p>
<p>The function handles odd and even-sized arrays correctly. The center of
an odd array is taken to be at (n+1)/2, and an even array is n/2+1.
:param insamples: Set of objects to be downsampled in the form of an array, the last dimension</p>
<blockquote>
<div><p>is the number of objects.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>szout</strong> – The desired resolution of for output objects.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An array consists of the blurred and downsampled objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.preprocess.downsample_centered">
<code class="sig-prename descclassname">aspire.utils.preprocess.</code><code class="sig-name descname">downsample_centered</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">insamples</span></em>, <em class="sig-param"><span class="n">szout</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.preprocess.downsample_centered" title="Permalink to this definition">¶</a></dt>
<dd><p>Blur and downsample 1D to 3D objects such as, curves, images or volumes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>insamples</strong> – Set of objects to be downsampled in the form of an array, the last dimension
is the number of objects.</p></li>
<li><p><strong>szout</strong> – The desired resolution of for output objects.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An array consists of the blurred and downsampled objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.preprocess.vol2img">
<code class="sig-prename descclassname">aspire.utils.preprocess.</code><code class="sig-name descname">vol2img</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">volume</span></em>, <em class="sig-param"><span class="n">rots</span></em>, <em class="sig-param"><span class="n">L</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dtype</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.preprocess.vol2img" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate 2D images from the input volume and rotation angles</p>
<p>The function handles odd and even-sized arrays correctly. The center of
an odd array is taken to be at (n+1)/2, and an even array is n/2+1.
:param volume: A 3D volume objects.
:param rots: A n-by-3-by-3 array of rotation angles.
:param L: The output size of 2D images.
:return: An array consists of 2D images.</p>
</dd></dl>

</div>
<div class="section" id="module-aspire.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-aspire.utils" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="aspire.utils.ensure">
<code class="sig-prename descclassname">aspire.utils.</code><code class="sig-name descname">ensure</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cond</span></em>, <em class="sig-param"><span class="n">error_message</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.ensure" title="Permalink to this definition">¶</a></dt>
<dd><p>assert statements in Python are sometimes optimized away by the compiler, and are for internal testing purposes.
For user-facing assertions, we use this simple wrapper to ensure conditions are met at relevant parts of the code.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cond</strong> – Condition to be ensured</p></li>
<li><p><strong>error_message</strong> – An optional error message if condition is not met</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If condition is met, returns nothing, otherwise raises AssertionError</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="aspire.utils.get_full_version">
<code class="sig-prename descclassname">aspire.utils.</code><code class="sig-name descname">get_full_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.get_full_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Get as much version information as we can, including git info (if applicable)
This method should never raise exceptions!</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>A version number in the form:
&lt;maj&gt;.&lt;min&gt;.&lt;bld&gt;</p>
<blockquote>
<div><p>If we’re running as a package distributed through setuptools</p>
</div></blockquote>
<dl>
<dt>&lt;maj&gt;.&lt;min&gt;.&lt;bld&gt;.&lt;rev&gt;</dt><dd><p>If we’re running as a ‘regular’ python source folder, possibly locally modified</p>
<dl>
<dt>&lt;rev&gt; is one of:</dt><dd><p>’src’: The package is running as a source folder
&lt;git_tag&gt; or &lt;git_rev&gt; or &lt;git_rev&gt;-dirty: A git tag or commit revision, possibly followed by a suffix</p>
<blockquote>
<div><p>’-dirty’ if source is modified locally</p>
</div></blockquote>
<p>’x’:   The revision cannot be determined</p>
</dd>
</dl>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="aspire.utils.numeric.html" class="btn btn-neutral float-right" title="aspire.utils.numeric package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="aspire.source.html" class="btn btn-neutral" title="aspire.source package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Princeton University

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>