

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aspire.utils package &mdash; ASPIRE 0.6.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="aspire.volume package" href="aspire.volume.html" />
    <link rel="prev" title="aspire.storage package" href="aspire.storage.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ASPIRE
          

          
          </a>

          
            
            
              <div class="version">
                0.6.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Modules</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="aspire.html">aspire package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="aspire.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="aspire.abinitio.html">aspire.abinitio package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.apple.html">aspire.apple package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.basis.html">aspire.basis package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.commands.html">aspire.commands package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.config.html">aspire.config package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.covariance.html">aspire.covariance package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.denoising.html">aspire.denoising package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.image.html">aspire.image package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.noise.html">aspire.noise package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.nufft.html">aspire.nufft package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.numeric.html">aspire.numeric package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.operators.html">aspire.operators package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.optimization.html">aspire.optimization package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.reconstruction.html">aspire.reconstruction package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.source.html">aspire.source package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.storage.html">aspire.storage package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">aspire.utils package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aspire.volume.html">aspire.volume package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="aspire.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="aspire.html#module-aspire.exceptions">aspire.exceptions module</a></li>
<li class="toctree-l3"><a class="reference internal" href="aspire.html#module-aspire">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Authors</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ASPIRE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">Modules</a> &raquo;</li>
        
          <li><a href="aspire.html">aspire package</a> &raquo;</li>
        
      <li>aspire.utils package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/aspire.utils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="aspire-utils-package">
<h1>aspire.utils package<a class="headerlink" href="#aspire-utils-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-aspire.utils.cell">
<span id="aspire-utils-cell-module"></span><h2>aspire.utils.cell module<a class="headerlink" href="#module-aspire.utils.cell" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="aspire.utils.cell.Cell2D">
<em class="property">class </em><code class="descclassname">aspire.utils.cell.</code><code class="descname">Cell2D</code><span class="sig-paren">(</span><em>rows</em>, <em>cols</em>, <em>dtype=&lt;class 'numpy.float32'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.cell.Cell2D" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Define a base class of Cell to perform similar cell functions in MATLAB.</p>
<p class="rubric">Methods</p>
<dl class="method">
<dt id="aspire.utils.cell.Cell2D.mat2cell">
<code class="descname">mat2cell</code><span class="sig-paren">(</span><em>mat</em>, <em>rows</em>, <em>cols</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.cell.Cell2D.mat2cell" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-aspire.utils.coor_trans">
<span id="aspire-utils-coor-trans-module"></span><h2>aspire.utils.coor_trans module<a class="headerlink" href="#module-aspire.utils.coor_trans" title="Permalink to this headline">¶</a></h2>
<p>General purpose math functions, mostly geometric in nature.</p>
<dl class="function">
<dt id="aspire.utils.coor_trans.cart2pol">
<code class="descclassname">aspire.utils.coor_trans.</code><code class="descname">cart2pol</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.cart2pol" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Cartesian to Polar Coordinates. All input arguments must be the same shape.
:param x: x-coordinate in Cartesian space
:param y: y-coordinate in Cartesian space
:return: A 2-tuple of values:</p>
<blockquote>
<div>theta: angular coordinate/azimuth
r: radial distance from origin</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.coor_trans.cart2sph">
<code class="descclassname">aspire.utils.coor_trans.</code><code class="descname">cart2sph</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>z</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.cart2sph" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform cartesian coordinates to spherical. All input arguments must be the same shape.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – X-values of input co-ordinates.</li>
<li><strong>y</strong> – Y-values of input co-ordinates.</li>
<li><strong>z</strong> – Z-values of input co-ordinates.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A 3-tuple of values, all of the same shape as the inputs.
(&lt;azimuth&gt;, &lt;elevation&gt;, &lt;radius&gt;)</p>
</td>
</tr>
</tbody>
</table>
<p>azimuth and elevation are returned in radians.</p>
<p>This function is equivalent to MATLAB’s cart2sph function.</p>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.coor_trans.common_line_from_rots">
<code class="descclassname">aspire.utils.coor_trans.</code><code class="descname">common_line_from_rots</code><span class="sig-paren">(</span><em>r1</em>, <em>r2</em>, <em>ell</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.common_line_from_rots" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the common line induced by rotation matrices r1 and r2.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>r1</strong> – The first rotation matrix of 3-by-3 array.</li>
<li><strong>r2</strong> – The second rotation matrix of 3-by-3 array.</li>
<li><strong>ell</strong> – The total number of common lines.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The common line indices for both first and second rotations.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.coor_trans.get_aligned_rotations">
<code class="descclassname">aspire.utils.coor_trans.</code><code class="descname">get_aligned_rotations</code><span class="sig-paren">(</span><em>rots</em>, <em>Q_mat</em>, <em>flag</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.get_aligned_rotations" title="Permalink to this definition">¶</a></dt>
<dd><p>Get aligned rotation matrices to reference ones.</p>
<p>Calculated aligned rotation matrices from the orthogonal transformation
that best aligns the estimated rotations to the reference rotations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>rots</strong> – The reference rotations to which we would like to align in
the form of a n-by-3-by-3 array.</li>
<li><strong>Q_mat</strong> – optimal orthogonal 3x3 transformation matrix</li>
<li><strong>flag</strong> – flag==1 then J conjugacy is required and 0 is not</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">regrot, aligned rotation matrices</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.coor_trans.get_rots_mse">
<code class="descclassname">aspire.utils.coor_trans.</code><code class="descname">get_rots_mse</code><span class="sig-paren">(</span><em>rots_reg</em>, <em>rots_ref</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.get_rots_mse" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate MSE between the estimated orientations to reference ones.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>rots_reg</strong> – The estimated rotations after alignment in the form of
a n-by-3-by-3 array.</li>
<li><strong>rots_ref</strong> – The reference rotations.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The MSE value between two sets of rotations.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.coor_trans.grid_1d">
<code class="descclassname">aspire.utils.coor_trans.</code><code class="descname">grid_1d</code><span class="sig-paren">(</span><em>n</em>, <em>shifted=False</em>, <em>normalized=True</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.grid_1d" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate one dimensional grid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>n</strong> – the number of grid points.</li>
<li><strong>shifted</strong> – shifted by half of grid or not when n is even.</li>
<li><strong>normalized</strong> – normalize the grid in the range of (-1, 1) or not.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the rectangular and polar coordinates of all grid points.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.coor_trans.grid_2d">
<code class="descclassname">aspire.utils.coor_trans.</code><code class="descname">grid_2d</code><span class="sig-paren">(</span><em>n</em>, <em>shifted=False</em>, <em>normalized=True</em>, <em>dtype=&lt;class 'numpy.float32'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.grid_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate two dimensional grid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>n</strong> – the number of grid points in each dimension.</li>
<li><strong>shifted</strong> – shifted by half of grid or not when n is even.</li>
<li><strong>normalized</strong> – normalize the grid in the range of (-1, 1) or not.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the rectangular and polar coordinates of all grid points.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.coor_trans.grid_3d">
<code class="descclassname">aspire.utils.coor_trans.</code><code class="descname">grid_3d</code><span class="sig-paren">(</span><em>n</em>, <em>shifted=False</em>, <em>normalized=True</em>, <em>dtype=&lt;class 'numpy.float32'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.grid_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate three dimensional grid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>n</strong> – the number of grid points in each dimension.</li>
<li><strong>shifted</strong> – shifted by half of grid or not when n is even.</li>
<li><strong>normalized</strong> – normalize the grid in the range of (-1, 1) or not.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the rectangular and spherical coordinates of all grid points.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.coor_trans.register_rotations">
<code class="descclassname">aspire.utils.coor_trans.</code><code class="descname">register_rotations</code><span class="sig-paren">(</span><em>rots</em>, <em>rots_ref</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.register_rotations" title="Permalink to this definition">¶</a></dt>
<dd><p>Register estimated orientations to reference ones.</p>
<p>Finds the orthogonal transformation that best aligns the estimated rotations
to the reference rotations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>rots</strong> – The rotations to be aligned in the form of a n-by-3-by-3 array.</li>
<li><strong>rots_ref</strong> – The reference rotations to which we would like to align in
the form of a n-by-3-by-3 array.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">o_mat, optimal orthogonal 3x3 matrix to align the two sets;
flag, flag==1 then J conjugacy is required and 0 is not.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.coor_trans.uniform_random_angles">
<code class="descclassname">aspire.utils.coor_trans.</code><code class="descname">uniform_random_angles</code><span class="sig-paren">(</span><em>n</em>, <em>seed=None</em>, <em>dtype=&lt;class 'numpy.float32'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.coor_trans.uniform_random_angles" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate random 3D rotation angles
:param n: The number of rotation angles to generate
:param seed: Random integer seed to use. If None, the current random state is used.
:return: A n-by-3 ndarray of rotation angles</p>
</dd></dl>

</div>
<div class="section" id="module-aspire.utils.fft">
<span id="aspire-utils-fft-module"></span><h2>aspire.utils.fft module<a class="headerlink" href="#module-aspire.utils.fft" title="Permalink to this headline">¶</a></h2>
<p>FFT/IFFT utilities</p>
<dl class="function">
<dt id="aspire.utils.fft.centered_fft1">
<code class="descclassname">aspire.utils.fft.</code><code class="descname">centered_fft1</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.fft.centered_fft1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="aspire.utils.fft.centered_fft2">
<code class="descclassname">aspire.utils.fft.</code><code class="descname">centered_fft2</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.fft.centered_fft2" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate a centered, two-dimensional inverse FFT
:param x: The two-dimensional signal to be transformed.</p>
<blockquote>
<div>The inverse FFT is only applied along the last two dimensions.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The centered inverse Fourier transform of x.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.fft.centered_fft3">
<code class="descclassname">aspire.utils.fft.</code><code class="descname">centered_fft3</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.fft.centered_fft3" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="aspire.utils.fft.centered_ifft1">
<code class="descclassname">aspire.utils.fft.</code><code class="descname">centered_ifft1</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.fft.centered_ifft1" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate a centered, one-dimensional inverse FFT
:param x: The one-dimensional signal to be transformed.</p>
<blockquote>
<div>The inverse FFT is only applied along the first dimension.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The centered inverse Fourier transform of x.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.fft.centered_ifft2">
<code class="descclassname">aspire.utils.fft.</code><code class="descname">centered_ifft2</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.fft.centered_ifft2" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate a centered, two-dimensional inverse FFT
:param x: The two-dimensional signal to be transformed.</p>
<blockquote>
<div>The inverse FFT is only applied along the last two dimensions.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The centered inverse Fourier transform of x.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.fft.centered_ifft3">
<code class="descclassname">aspire.utils.fft.</code><code class="descname">centered_ifft3</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.fft.centered_ifft3" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate a centered, three-dimensional inverse FFT
:param x: The three-dimensional signal to be transformed.</p>
<blockquote>
<div>The inverse FFT is only applied along the last three dimensions.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The centered inverse Fourier transform of x.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.fft.mdim_fftshift">
<code class="descclassname">aspire.utils.fft.</code><code class="descname">mdim_fftshift</code><span class="sig-paren">(</span><em>x</em>, <em>dims=None</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.fft.mdim_fftshift" title="Permalink to this definition">¶</a></dt>
<dd><p>Multi-dimensional FFT shift</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – The array to be shifted.</li>
<li><strong>dims</strong> – An array of dimension indices along which the shift should occur.
If None, the shift is performed along all dimensions.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The x array shifted along the desired dimensions.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.fft.mdim_ifftshift">
<code class="descclassname">aspire.utils.fft.</code><code class="descname">mdim_ifftshift</code><span class="sig-paren">(</span><em>x</em>, <em>dims=None</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.fft.mdim_ifftshift" title="Permalink to this definition">¶</a></dt>
<dd><p>Multi-dimensional FFT unshift
:param x: The array to be unshifted.
:param dims: An array of dimension indices along which the unshift should occur.</p>
<blockquote>
<div>If None, the unshift is performed along all dimensions.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The x array unshifted along the desired dimensions.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-aspire.utils.filter_to_fb_mat">
<span id="aspire-utils-filter-to-fb-mat-module"></span><h2>aspire.utils.filter_to_fb_mat module<a class="headerlink" href="#module-aspire.utils.filter_to_fb_mat" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="aspire.utils.filter_to_fb_mat.filter_to_fb_mat">
<code class="descclassname">aspire.utils.filter_to_fb_mat.</code><code class="descname">filter_to_fb_mat</code><span class="sig-paren">(</span><em>h_fun</em>, <em>fbasis</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.filter_to_fb_mat.filter_to_fb_mat" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a nonradial function in k space into a basis representation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>h_fun</strong> – The function form in k space.</li>
<li><strong>fbasis</strong> – The basis object for expanding.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a BlkDiagMatrix instance representation using the</p>
</td>
</tr>
</tbody>
</table>
<p><cite>fbasis</cite> expansion.</p>
</dd></dl>

</div>
<div class="section" id="module-aspire.utils.matlab_compat">
<span id="aspire-utils-matlab-compat-module"></span><h2>aspire.utils.matlab_compat module<a class="headerlink" href="#module-aspire.utils.matlab_compat" title="Permalink to this headline">¶</a></h2>
<p>Functions for compatibility with MATLAB behavior.
At some point when the package is full validated against MatLab, the ‘order’ arguments in the functions here
can be changed to ‘C’, and subsequently, this package deprecated altogether (i.e. the reshape/flatten methods used
directly by the caller).</p>
<dl class="function">
<dt id="aspire.utils.matlab_compat.m_flatten">
<code class="descclassname">aspire.utils.matlab_compat.</code><code class="descname">m_flatten</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matlab_compat.m_flatten" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="aspire.utils.matlab_compat.m_reshape">
<code class="descclassname">aspire.utils.matlab_compat.</code><code class="descname">m_reshape</code><span class="sig-paren">(</span><em>x</em>, <em>new_shape</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matlab_compat.m_reshape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="aspire.utils.matlab_compat.stable_eigsh">
<code class="descclassname">aspire.utils.matlab_compat.</code><code class="descname">stable_eigsh</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matlab_compat.stable_eigsh" title="Permalink to this definition">¶</a></dt>
<dd><p>A Wrapper function to fix sign problem of eigen-vectors</p>
<p>There is an ambiguous sign problem for the eigenvectors from
scipy.sparse.linalg.eigsh function. We need to rescale the
eigenvectors and make them consistent for repeated runs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>*args</strong> – <p>Positional arguments</p>
</li>
<li><strong>**kwargs</strong> – <p>Keyword arguments</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Eigenvalues and eigenvectors</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-aspire.utils.matrix">
<span id="aspire-utils-matrix-module"></span><h2>aspire.utils.matrix module<a class="headerlink" href="#module-aspire.utils.matrix" title="Permalink to this headline">¶</a></h2>
<p>Utilties for arrays/n-dimensional matrices.</p>
<dl class="function">
<dt id="aspire.utils.matrix.acorr">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">acorr</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>axes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.acorr" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate array correlation along given axes
:param x: An array of arbitrary shape
:param y: An array of same shape as x
:param axes: The axis along which to compute the correlation. If None, the correlation is calculated along all axes.
:return: The correlation of x along specified axes.</p>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.ainner">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">ainner</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>axes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.ainner" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate array inner product along given axes
:param x: An array of arbitrary shape
:param y: An array of same shape as x
:param axes: The axis along which to compute the inner product. If None, the product is calculated along all axes.
:return:</p>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.anorm">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">anorm</code><span class="sig-paren">(</span><em>x</em>, <em>axes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.anorm" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate array norm along given axes
:param x: An array of arbitrary size and shape.
:param axes: The axis along which to compute the norm. If None, the norm is calculated along all axes.
:return: The Euclidean (l^2) norm of x along specified axes.</p>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.eigs">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">eigs</code><span class="sig-paren">(</span><em>A</em>, <em>k</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.eigs" title="Permalink to this definition">¶</a></dt>
<dd><p>Multidimensional partial eigendecomposition
:param A: An array of size <cite>sig_sz</cite>-by-<cite>sig_sz</cite>, where <cite>sig_sz</cite> is a size containing d dimensions.</p>
<blockquote>
<div>The array represents a matrix with d indices for its rows and columns.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>k</strong> – The number of eigenvalues and eigenvectors to calculate (default 6).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A 2-tuple of values
V: An array of eigenvectors of size <cite>sig_sz</cite>-by-k.
D: A matrix of size k-by-k containing the corresponding eigenvalues in the diagonals.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.im_to_vec">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">im_to_vec</code><span class="sig-paren">(</span><em>im</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.im_to_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Roll up images into vectors
:param im: An N-by-N-by-… array.
:return: An N^2-by-… array.</p>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.make_symmat">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">make_symmat</code><span class="sig-paren">(</span><em>A</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.make_symmat" title="Permalink to this definition">¶</a></dt>
<dd><p>Symmetrize a matrix
:param A: A matrix.
:return: The Hermitian matrix (A+A’)/2.</p>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.mat_to_vec">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">mat_to_vec</code><span class="sig-paren">(</span><em>mat</em>, <em>is_symmat=False</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.mat_to_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a matrix into vectorized form
:param mat: An array of size N-by-N-by-… containing the matrices to be vectorized.
:param is_symmat: Specifies whether the matrices are symmetric/Hermitian, in which case they are stored in packed</p>
<blockquote>
<div>form using symmat_to_vec (default False).</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The vectorized form of the matrices, with dimension N^2-by-… or N*(N+1)/2-by-… depending on the value
of is_symmat.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.mdim_mat_fun_conj">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">mdim_mat_fun_conj</code><span class="sig-paren">(</span><em>X</em>, <em>d1</em>, <em>d2</em>, <em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.mdim_mat_fun_conj" title="Permalink to this definition">¶</a></dt>
<dd><p>Conjugate a multidimensional matrix using a linear mapping
:param X: An N_1-by-…-by-N_d1-by-N_1…-by-N_d1-by-… array, with the first 2*d1 dimensions corresponding to</p>
<blockquote>
<div>matrices with columns and rows of dimension d1.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>d1</strong> – The dimension of the input matrix X</li>
<li><strong>d2</strong> – The dimension of the output matrix Y</li>
<li><strong>f</strong> – A function handle of a linear map that takes an array of size N_1-by-…-by-N_d1-by-… and returns an
array of size M_1-by-…-by-M_d2-by-… .</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">An array of size M_1-by-…-by-M_d2-by-M_1-by-…-by-M_d2-by-… resulting from applying fun to the rows
and columns of the multidimensional matrix X.</p>
</td>
</tr>
</tbody>
</table>
<p>TODO: Very complicated to wrap head around this one!</p>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.roll_dim">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">roll_dim</code><span class="sig-paren">(</span><em>X</em>, <em>dim</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.roll_dim" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.symmat_to_vec">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">symmat_to_vec</code><span class="sig-paren">(</span><em>mat</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.symmat_to_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Packs a symmetric matrix into a lower triangular vector
:param mat: An array of size N-by-N-by-… where the first two dimensions constitute symmetric or</p>
<blockquote>
<div>Hermitian matrices.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A vector of size N*(N+1)/2-by-… consisting of the lower triangular part of each matrix.</td>
</tr>
</tbody>
</table>
<p>Note that a lot of acrobatics happening here (swapaxes/triu instead of tril etc.) are so that we can get
column-major ordering of elements (to get behavior consistent with MATLAB), since masking in numpy only returns
data in row-major order.</p>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.symmat_to_vec_iso">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">symmat_to_vec_iso</code><span class="sig-paren">(</span><em>mat</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.symmat_to_vec_iso" title="Permalink to this definition">¶</a></dt>
<dd><p>Isometrically maps a symmetric matrix to a packed vector
:param mat: An array of size N-by-N-by-… where the first two dimensions constitute symmetric or Hermitian</p>
<blockquote>
<div>matrices.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A vector of size N*(N+1)/2-by-… consisting of the lower triangular part of each matrix, reweighted so
that the Frobenius inner product is mapped to the Euclidean inner product.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.unroll_dim">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">unroll_dim</code><span class="sig-paren">(</span><em>X</em>, <em>dim</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.unroll_dim" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.vec_to_im">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">vec_to_im</code><span class="sig-paren">(</span><em>X</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.vec_to_im" title="Permalink to this definition">¶</a></dt>
<dd><p>Unroll vectors to images
:param X: N^2-by-… array.
:return: An N-by-N-by-… array.</p>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.vec_to_mat">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">vec_to_mat</code><span class="sig-paren">(</span><em>vec</em>, <em>is_symmat=False</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.vec_to_mat" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a vectorized matrix into a matrix
:param vec: The vectorized representations. If the matrix is non-symmetric, this array has the dimensions</p>
<blockquote>
<div>N^2-by-…, but if the matrix is symmetric, the dimensions are N*(N+1)/2-by-… .</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>is_symmat</strong> – True if the vectors represent symmetric matrices (default False)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The array of size N-by-N-by-… representing the matrices.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.vec_to_symmat">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">vec_to_symmat</code><span class="sig-paren">(</span><em>vec</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.vec_to_symmat" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert packed lower triangular vector to symmetric matrix
:param vec: A vector of size N*(N+1)/2-by-… describing a symmetric (or Hermitian) matrix.
:return: An array of size N-by-N-by-… which indexes symmetric/Hermitian matrices that occupy the first two</p>
<blockquote>
<div>dimensions. The lower triangular parts of these matrices consists of the corresponding vectors in vec.</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.vec_to_symmat_iso">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">vec_to_symmat_iso</code><span class="sig-paren">(</span><em>vec</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.vec_to_symmat_iso" title="Permalink to this definition">¶</a></dt>
<dd><p>Isometrically map packed vector to symmetric matrix
:param vec: A vector of size N*(N+1)/2-by-… describing a symmetric (or Hermitian) matrix.
:return: An array of size N-by-N-by-… which indexes symmetric/Hermitian matrices that occupy the first two</p>
<blockquote>
<div>dimensions. The lower triangular parts of these matrices consists of the corresponding vectors in vec,
reweighted so that the Euclidean inner product maps to the Frobenius inner product.</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.vec_to_vol">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">vec_to_vol</code><span class="sig-paren">(</span><em>X</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.vec_to_vol" title="Permalink to this definition">¶</a></dt>
<dd><p>Unroll vectors to volumes
:param X: N^3-by-… array.
:return: An N-by-N-by-N-by-… array.</p>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.vecmat_to_volmat">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">vecmat_to_volmat</code><span class="sig-paren">(</span><em>X</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.vecmat_to_volmat" title="Permalink to this definition">¶</a></dt>
<dd><p>Roll up vector matrices into volume matrices
:param X: A vector matrix of size L1^3-by-L2^3-by-…
:return: A volume “matrix” of size L1-by-L1-by-L1-by-L2-by-L2-by-L2-by-…</p>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.vol_to_vec">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">vol_to_vec</code><span class="sig-paren">(</span><em>X</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.vol_to_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Roll up volumes into vectors
:param X: N-by-N-by-N-by-… array.
:return: An N^3-by-… array.</p>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.matrix.volmat_to_vecmat">
<code class="descclassname">aspire.utils.matrix.</code><code class="descname">volmat_to_vecmat</code><span class="sig-paren">(</span><em>X</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.matrix.volmat_to_vecmat" title="Permalink to this definition">¶</a></dt>
<dd><p>Unroll volume matrices to vector matrices
:param X: A volume “matrix” of size L1-by-L1-by-L1-by-L2-by-L2-by-L2-by-…
:return: A vector matrix of size L1^3-by-L2^3-by-…</p>
</dd></dl>

</div>
<div class="section" id="module-aspire.utils.misc">
<span id="aspire-utils-misc-module"></span><h2>aspire.utils.misc module<a class="headerlink" href="#module-aspire.utils.misc" title="Permalink to this headline">¶</a></h2>
<p>Miscellaneous Utilities that have no better place (yet).</p>
<dl class="function">
<dt id="aspire.utils.misc.ensure">
<code class="descclassname">aspire.utils.misc.</code><code class="descname">ensure</code><span class="sig-paren">(</span><em>cond</em>, <em>error_message=None</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.misc.ensure" title="Permalink to this definition">¶</a></dt>
<dd><p>assert statements in Python are sometimes optimized away by the compiler, and are for internal testing purposes.
For user-facing assertions, we use this simple wrapper to ensure conditions are met at relevant parts of the code.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cond</strong> – Condition to be ensured</li>
<li><strong>error_message</strong> – An optional error message if condition is not met</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">If condition is met, returns nothing, otherwise raises AssertionError</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.misc.get_full_version">
<code class="descclassname">aspire.utils.misc.</code><code class="descname">get_full_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.misc.get_full_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Get as much version information as we can, including git info (if applicable)
This method should never raise exceptions!</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A version number in the form:
&lt;maj&gt;.&lt;min&gt;.&lt;bld&gt;<blockquote>
<div>If we’re running as a package distributed through setuptools</div></blockquote>
<dl class="docutils">
<dt>&lt;maj&gt;.&lt;min&gt;.&lt;bld&gt;.&lt;rev&gt;</dt>
<dd>If we’re running as a ‘regular’ python source folder, possibly locally modified<dl class="last docutils">
<dt>&lt;rev&gt; is one of:</dt>
<dd>’src’: The package is running as a source folder
&lt;git_tag&gt; or &lt;git_rev&gt; or &lt;git_rev&gt;-dirty: A git tag or commit revision, possibly followed by a suffix<blockquote>
<div>’-dirty’ if source is modified locally</div></blockquote>
<p class="last">’x’:   The revision cannot be determined</p>
</dd>
</dl>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.misc.powerset">
<code class="descclassname">aspire.utils.misc.</code><code class="descname">powerset</code><span class="sig-paren">(</span><em>iterable</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.misc.powerset" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate all subsets of an iterable. Example:</p>
<p>powerset([1,2,3]) –&gt; () (1,) (2,) (3,) (1,2) (1,3) (2,3) (1,2,3)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Generator covering all subsets of iterable.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.misc.sha256sum">
<code class="descclassname">aspire.utils.misc.</code><code class="descname">sha256sum</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.misc.sha256sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Return sha256 hash of filename.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> – path to file</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">sha256 hash as hex</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-aspire.utils.random">
<span id="aspire-utils-random-module"></span><h2>aspire.utils.random module<a class="headerlink" href="#module-aspire.utils.random" title="Permalink to this headline">¶</a></h2>
<p>Utilities for controlling and generating random numbers.</p>
<dl class="class">
<dt id="aspire.utils.random.Random">
<em class="property">class </em><code class="descclassname">aspire.utils.random.</code><code class="descname">Random</code><span class="sig-paren">(</span><em>seed=None</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.random.Random" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A context manager that pushes a random seed to the stack for reproducible results,
and pops it on exit.</p>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.random.choice">
<code class="descclassname">aspire.utils.random.</code><code class="descname">choice</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.random.choice" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps numpy random.choice call in ASPIRE Random context.</p>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.random.rand">
<code class="descclassname">aspire.utils.random.</code><code class="descname">rand</code><span class="sig-paren">(</span><em>size</em>, <em>seed=None</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.random.rand" title="Permalink to this definition">¶</a></dt>
<dd><p>Note this is for MATLAB repro (see m_reshape).</p>
<p>Other uses prefer use of <cite>random</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.random.randi">
<code class="descclassname">aspire.utils.random.</code><code class="descname">randi</code><span class="sig-paren">(</span><em>i_max</em>, <em>size</em>, <em>seed=None</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.random.randi" title="Permalink to this definition">¶</a></dt>
<dd><p>A MATLAB compatible randi implementation that returns numbers from a discrete uniform distribution.
While a direct use of np.random.choice would be convenient, this doesn’t seem to return results
identical to MATLAB.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>iMax</strong> – TODO</li>
<li><strong>size</strong> – size of the resulting np array</li>
<li><strong>seed</strong> – Random seed to use (None to apply no seed)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A np array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.random.randn">
<code class="descclassname">aspire.utils.random.</code><code class="descname">randn</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.random.randn" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls rand and applies inverse transform sampling to the output.</p>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.random.random">
<code class="descclassname">aspire.utils.random.</code><code class="descname">random</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.random.random" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps numpy.random.random with ASPIRE Random context manager.</p>
</dd></dl>

</div>
<div class="section" id="module-aspire.utils.rotation">
<span id="aspire-utils-rotation-module"></span><h2>aspire.utils.rotation module<a class="headerlink" href="#module-aspire.utils.rotation" title="Permalink to this headline">¶</a></h2>
<p>Define a Rotation Class for customized rotation operations used by ASPIRE.</p>
<dl class="class">
<dt id="aspire.utils.rotation.Rotation">
<em class="property">class </em><code class="descclassname">aspire.utils.rotation.</code><code class="descname">Rotation</code><span class="sig-paren">(</span><em>matrices</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.rotation.Rotation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<blockquote>
<div>Initialize a Rotation object</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>matrices</strong> – Rotation matrices to initialize Rotation object.</td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<p class="rubric">Methods</p>
<dl class="attribute">
<dt id="aspire.utils.rotation.Rotation.angles">
<code class="descname">angles</code><a class="headerlink" href="#aspire.utils.rotation.Rotation.angles" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Rotation matrices as a n x 3 x 3 array</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aspire.utils.rotation.Rotation.apply_registration">
<code class="descname">apply_registration</code><span class="sig-paren">(</span><em>Q_mat</em>, <em>flag</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.rotation.Rotation.apply_registration" title="Permalink to this definition">¶</a></dt>
<dd><p>Get aligned Rotation object to reference ones.</p>
<p>Calculated aligned rotation matrices from the orthogonal transformation
that best aligns the estimated rotations to the reference rotations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>Q_mat</strong> – optimal orthogonal 3x3 transformation matrix</li>
<li><strong>flag</strong> – flag==1 then J conjugacy is required and 0 is not</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">regrot, aligned Rotation object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aspire.utils.rotation.Rotation.common_lines">
<code class="descname">common_lines</code><span class="sig-paren">(</span><em>i</em>, <em>j</em>, <em>ell</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.rotation.Rotation.common_lines" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the common line induced by rotation matrices i and j.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>i</strong> – The index of first rotation matrix of 3-by-3 array.</li>
<li><strong>j</strong> – The index of second rotation matrix of 3-by-3 array.</li>
<li><strong>ell</strong> – The total number of common lines.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The common line indices for both first and second rotations.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="aspire.utils.rotation.Rotation.dtype">
<code class="descname">dtype</code><a class="headerlink" href="#aspire.utils.rotation.Rotation.dtype" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">dtype of Rotation matrices</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aspire.utils.rotation.Rotation.find_registration">
<code class="descname">find_registration</code><span class="sig-paren">(</span><em>rots_ref</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.rotation.Rotation.find_registration" title="Permalink to this definition">¶</a></dt>
<dd><p>Register estimated orientations to reference ones.</p>
<p>Finds the orthogonal transformation that best aligns the estimated rotations
to the reference rotations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rots_ref</strong> – The reference Rotation object to which we would like to align
with data matrices in the form of a n-by-3-by-3 array.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">o_mat, optimal orthogonal 3x3 matrix to align the two sets;
flag, flag==1 then J conjugacy is required and 0 is not.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="aspire.utils.rotation.Rotation.from_euler">
<em class="property">static </em><code class="descname">from_euler</code><span class="sig-paren">(</span><em>values</em>, <em>dtype=&lt;class 'numpy.float32'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.rotation.Rotation.from_euler" title="Permalink to this definition">¶</a></dt>
<dd><p>build rotation object from Euler angles in radians</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dtype</strong> – data type for rotational angles and matrices</li>
<li><strong>values</strong> – Rotation angles in radians, as a n x 3 array</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">new Rotation object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="aspire.utils.rotation.Rotation.from_matrix">
<em class="property">static </em><code class="descname">from_matrix</code><span class="sig-paren">(</span><em>values</em>, <em>dtype=&lt;class 'numpy.float32'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.rotation.Rotation.from_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>build rotation object from rotational matrices</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dtype</strong> – data type for rotational angles and matrices</li>
<li><strong>values</strong> – Rotation matrices, as a n x 3 x 3 array</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">new Rotation object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="aspire.utils.rotation.Rotation.generate_random_rotations">
<em class="property">static </em><code class="descname">generate_random_rotations</code><span class="sig-paren">(</span><em>n</em>, <em>seed=None</em>, <em>dtype=&lt;class 'numpy.float32'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.rotation.Rotation.generate_random_rotations" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Rotation object with random 3D rotation matrices</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>n</strong> – The number of rotation matrices to generate</li>
<li><strong>seed</strong> – Random integer seed to use. If None,
the current random state is used.</li>
<li><strong>dtype</strong> – data type for rotational angles and matrices</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A new Rotation object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aspire.utils.rotation.Rotation.invert">
<code class="descname">invert</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.rotation.Rotation.invert" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply transpose operation to all rotation matrices</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The set of transposed matrices</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="aspire.utils.rotation.Rotation.matrices">
<code class="descname">matrices</code><a class="headerlink" href="#aspire.utils.rotation.Rotation.matrices" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Rotation matrices as a n x 3 x 3 array</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aspire.utils.rotation.Rotation.mse">
<code class="descname">mse</code><span class="sig-paren">(</span><em>rots_ref</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.rotation.Rotation.mse" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate MSE between the estimated orientations to reference ones.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>rots_reg</strong> – The estimated Rotation object after alignment
with data matrices in the form of a n-by-3-by-3 array.</li>
<li><strong>rots_ref</strong> – The reference Rotation object.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The MSE value between two sets of rotations.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aspire.utils.rotation.Rotation.register">
<code class="descname">register</code><span class="sig-paren">(</span><em>rots_ref</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.rotation.Rotation.register" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Estimate global orientation and return an aligned Rotation object.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rots_ref</strong> – The reference Rotation object to which we would like
to align with data matrices in the form of a n-by-3-by-3 array.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">an aligned Rotation object</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-aspire.utils.types">
<span id="aspire-utils-types-module"></span><h2>aspire.utils.types module<a class="headerlink" href="#module-aspire.utils.types" title="Permalink to this headline">¶</a></h2>
<p>Miscellaneous utilities for common data type operations.</p>
<dl class="function">
<dt id="aspire.utils.types.complex_type">
<code class="descclassname">aspire.utils.types.</code><code class="descname">complex_type</code><span class="sig-paren">(</span><em>realtype</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.types.complex_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Numpy complex type from corresponding real type</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>realtype</strong> – Numpy real type</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return complextype:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Numpy complex type</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.types.real_type">
<code class="descclassname">aspire.utils.types.</code><code class="descname">real_type</code><span class="sig-paren">(</span><em>complextype</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.types.real_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Numpy real type from corresponding complex type</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>complextype</strong> – Numpy complex type</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return realtype:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Numpy real type</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aspire.utils.types.utest_tolerance">
<code class="descclassname">aspire.utils.types.</code><code class="descname">utest_tolerance</code><span class="sig-paren">(</span><em>dtype</em><span class="sig-paren">)</span><a class="headerlink" href="#aspire.utils.types.utest_tolerance" title="Permalink to this definition">¶</a></dt>
<dd><p>Return ASPIRE tolerance for unit tests based on <cite>dtype</cite>.</p>
</dd></dl>

</div>
<div class="section" id="module-aspire.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-aspire.utils" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="aspire.volume.html" class="btn btn-neutral float-right" title="aspire.volume package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="aspire.storage.html" class="btn btn-neutral float-left" title="aspire.storage package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Princeton University

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>